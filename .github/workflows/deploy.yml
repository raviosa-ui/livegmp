name: üîí Deploy to LiveGMP.in via SFTP (Port 22)

on:
  push:
    branches:
      - main  # Set this to your main branch (e.g., main or master)

jobs:
  web_deploy:
    name: SFTP Deployment
    runs-on: ubuntu-latest

    steps:
      - name: ‚¨áÔ∏è Checkout Repository
        uses: actions/checkout@v4
        
      - name: üöÄ Deploy via SFTP
        # CORRECTED: Using the full, pinned version tag (v1.3.1)
        uses: SamKirkland/SFTP-Deploy-Action@v1.3.1
        with:
          # --- DREAMHOST CREDENTIALS (from GitHub Secrets) ---
          server: ${{ secrets.DH_HOST }}
          username: ${{ secrets.DH_USER }}
          password: ${{ secrets.DH_PASS }}
          port: 22 # Using SFTP default port

          # --- DIRECTORY PATHS ---
          # Local directory: Look for all files/folders in the repo root
          local-path: './**'
          
          # Server directory: The absolute path on DreamHost (ends with /)
          remote-path: '/home/${{ secrets.DH_USER }}/livegmp.in/'
          
          # --- OPTIONS ---
          # Optional: Keep the remote path clean by deleting files not present locally
          dry-run: false
