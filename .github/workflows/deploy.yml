name: üîí Deploy to LiveGMP.in via SFTP (Port 22)

on:
  push:
    branches:
      - main  # Ensure this matches your main branch name

jobs:
  web_deploy:
    name: SFTP Deployment
    runs-on: ubuntu-latest

    steps:
      - name: ‚¨áÔ∏è Checkout Repository
        uses: actions/checkout@v4
        
      - name: üöÄ Deploy via SFTP
        # Use an action designed for SFTP password authentication
        uses: SamKirkland/SFTP-Deploy-Action@v1.3.1 # Note the action change!
        with:
          # --- REQUIRED SECRETS ---
          server: ${{ secrets.DH_HOST }}
          username: ${{ secrets.DH_USER }}
          password: ${{ secrets.DH_PASS }}
          port: 22 # Explicitly set to SFTP default port

          # --- DIRECTORIES ---
          # Local directory: The root of your repo
          local-path: './**' # '**' ensures all files/folders are included
          
          # Server directory: The absolute path to your site's root on DreamHost
          remote-path: '/home/${{ secrets.DH_USER }}/livegmp.in/'
          
          # --- OPTIONS ---
          # Optional: Keep the remote path clean by deleting files not present locally
          dry-run: false
